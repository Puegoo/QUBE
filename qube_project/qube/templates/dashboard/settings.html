{% extends 'master.html' %}
{% load static %}
{% block content %}
<div class="form-container">
    <h2>Ustawienia konta</h2>
    
    <!-- Profile information form -->
    <form method="POST" action="{% url 'settings' %}">
        {% csrf_token %}
        <input type="hidden" name="update_profile" value="1">
        
        <fieldset>
            <legend>Zmiana danych u≈ºytkownika</legend>
            
            <label for="id_username">Nazwa u≈ºytkownika</label>
            <input type="text" name="username" value="{{ user.username }}" id="id_username" class="form-control" readonly>
            <p class="helptext">Nazwa u≈ºytkownika nie mo≈ºe byƒá zmieniona.</p>
            
            <label for="id_email">Email</label>
            <input type="email" name="email" value="{{ user_form.email.value|default:'' }}" id="id_email" class="form-control" required>
        </fieldset>
        
        <button type="submit" class="btn">üíæ Aktualizuj dane</button>
    </form>
    
    <hr style="margin: 30px 0;">
    
    <!-- Password change form -->
    <form method="POST" action="{% url 'settings' %}">
        {% csrf_token %}
        <input type="hidden" name="change_password" value="1">
        
        <fieldset>
            <legend>Zmiana has≈Ça</legend>
            
            <label for="id_old_password">Aktualne has≈Ço</label>
            <input type="password" name="old_password" id="id_old_password" class="form-control" required>
            
            <label for="id_new_password1">Nowe has≈Ço</label>
            <input type="password" name="new_password1" id="id_new_password1" class="form-control" required>
            
            <label for="id_new_password2">Powt√≥rz nowe has≈Ço</label>
            <input type="password" name="new_password2" id="id_new_password2" class="form-control" required>
        </fieldset>
        
        <button type="submit" class="btn">üîí Zmie≈Ñ has≈Ço</button>
    </form>
    
    <!-- Display any messages from the backend -->
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="message {% if message.tags %}{{ message.tags }}{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endblock %}